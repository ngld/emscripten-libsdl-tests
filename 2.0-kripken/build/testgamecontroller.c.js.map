{"version":3,"file":"testgamecontroller.c.js","sources":["../SDL-2.0.0/testgamecontroller.c"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkRA;AACA;AAAA","sourcesContent":["/*\n  Copyright (C) 1997-2013 Sam Lantinga <slouken@libsdl.org>\n\n  This software is provided 'as-is', without any express or implied\n  warranty.  In no event will the authors be held liable for any damages\n  arising from the use of this software.\n\n  Permission is granted to anyone to use this software for any purpose,\n  including commercial applications, and to alter it and redistribute it\n  freely.\n*/\n\n/* Simple program to test the SDL game controller routines */\n\n#include <stdio.h>\n#include <stdlib.h>\n#include <string.h>\n\n#include \"SDL.h\"\n\n#ifndef SDL_JOYSTICK_DISABLED\n\n#ifdef __IPHONEOS__\n#define SCREEN_WIDTH    320\n#define SCREEN_HEIGHT    480\n#else\n#define SCREEN_WIDTH    640\n#define SCREEN_HEIGHT    480\n#endif\n\n#define MAX_NUM_AXES 6\n#define MAX_NUM_HATS 2\n\nstatic SDL_bool s_ForceQuit = SDL_FALSE;\n\nstatic void\nDrawRect(SDL_Renderer *r, const int x, const int y, const int w, const int h)\n{\n    const SDL_Rect area = { x, y, w, h };\n    SDL_RenderFillRect(r, &area);\n}\n\nstatic const char *\nControllerAxisName(const SDL_GameControllerAxis axis)\n{\n    switch (axis)\n    {\n        #define AXIS_CASE(ax) case SDL_CONTROLLER_AXIS_##ax: return #ax\n        AXIS_CASE(INVALID);\n        AXIS_CASE(LEFTX);\n        AXIS_CASE(LEFTY);\n        AXIS_CASE(RIGHTX);\n        AXIS_CASE(RIGHTY);\n        AXIS_CASE(TRIGGERLEFT);\n        AXIS_CASE(TRIGGERRIGHT);\n        #undef AXIS_CASE\n        default: return \"???\";\n    }\n}\n\nstatic const char *\nControllerButtonName(const SDL_GameControllerButton button)\n{\n    switch (button)\n    {\n        #define BUTTON_CASE(btn) case SDL_CONTROLLER_BUTTON_##btn: return #btn\n        BUTTON_CASE(INVALID);\n        BUTTON_CASE(A);\n        BUTTON_CASE(B);\n        BUTTON_CASE(X);\n        BUTTON_CASE(Y);\n        BUTTON_CASE(BACK);\n        BUTTON_CASE(GUIDE);\n        BUTTON_CASE(START);\n        BUTTON_CASE(LEFTSTICK);\n        BUTTON_CASE(RIGHTSTICK);\n        BUTTON_CASE(LEFTSHOULDER);\n        BUTTON_CASE(RIGHTSHOULDER);\n        BUTTON_CASE(DPAD_UP);\n        BUTTON_CASE(DPAD_DOWN);\n        BUTTON_CASE(DPAD_LEFT);\n        BUTTON_CASE(DPAD_RIGHT);\n        #undef BUTTON_CASE\n        default: return \"???\";\n    }\n}\n\nvoid\nWatchGameController(SDL_GameController * gamecontroller)\n{\n    const char *name = SDL_GameControllerName(gamecontroller);\n    const char *basetitle = \"Game Controller Test: \";\n    const size_t titlelen = SDL_strlen(basetitle) + SDL_strlen(name) + 1;\n    char *title = SDL_malloc(titlelen);\n    SDL_Window *window = NULL;\n    SDL_Renderer *screen = NULL;\n    int done = 0;\n    SDL_Event event;\n    int i;\n\n    if (title) {\n        SDL_snprintf(title, titlelen, \"%s%s\", basetitle, name);\n    }\n\n    /* Create a window to display controller axis position */\n    window = SDL_CreateWindow(title, SDL_WINDOWPOS_CENTERED,\n                              SDL_WINDOWPOS_CENTERED, SCREEN_WIDTH,\n                              SCREEN_HEIGHT, 0);\n    if (window == NULL) {\n        fprintf(stderr, \"Couldn't create window: %s\\n\", SDL_GetError());\n        return;\n    }\n\n    screen = SDL_CreateRenderer(window, -1, 0);\n    if (screen == NULL) {\n        fprintf(stderr, \"Couldn't create renderer: %s\\n\", SDL_GetError());\n        SDL_DestroyWindow(window);\n        return;\n    }\n\n    SDL_SetRenderDrawColor(screen, 0x00, 0x00, 0x00, SDL_ALPHA_OPAQUE);\n    SDL_RenderClear(screen);\n    SDL_RenderPresent(screen);\n    SDL_RaiseWindow(window);\n\n    /* Print info about the controller we are watching */\n    printf(\"Watching controller %s\\n\",  name ? name : \"Unknown Controller\");\n\n    /* Loop, getting controller events! */\n    while (!done) {\n        /* blank screen, set up for drawing this frame. */\n        SDL_SetRenderDrawColor(screen, 0x00, 0x00, 0x00, SDL_ALPHA_OPAQUE);\n        SDL_RenderClear(screen);\n\n        while (SDL_PollEvent(&event)) {\n            switch (event.type) {\n            case SDL_CONTROLLERAXISMOTION:\n                printf(\"Controller %d axis %d ('%s') value: %d\\n\",\n                       event.caxis.which,\n                       event.caxis.axis,\n                       ControllerAxisName(event.caxis.axis),\n                       event.caxis.value);\n                break;\n            case SDL_CONTROLLERBUTTONDOWN:\n                printf(\"Controller %d button %d ('%s') down\\n\",\n                       event.cbutton.which, event.cbutton.button,\n                       ControllerButtonName(event.cbutton.button));\n                break;\n            case SDL_CONTROLLERBUTTONUP:\n                printf(\"Controller %d button %d ('%s') up\\n\",\n                       event.cbutton.which, event.cbutton.button,\n                       ControllerButtonName(event.cbutton.button));\n                break;\n            case SDL_KEYDOWN:\n                if (event.key.keysym.sym != SDLK_ESCAPE) {\n                    break;\n                }\n                /* Fall through to signal quit */\n            case SDL_QUIT:\n                done = 1;\n                s_ForceQuit = SDL_TRUE;\n                break;\n            default:\n                break;\n            }\n        }\n        /* Update visual controller state */\n        SDL_SetRenderDrawColor(screen, 0x00, 0xFF, 0x00, SDL_ALPHA_OPAQUE);\n        for (i = 0; i <SDL_CONTROLLER_BUTTON_MAX; ++i) {\n            if (SDL_GameControllerGetButton(gamecontroller, i) == SDL_PRESSED) {\n                DrawRect(screen, i * 34, SCREEN_HEIGHT - 34, 32, 32);\n            }\n        }\n\n        SDL_SetRenderDrawColor(screen, 0xFF, 0x00, 0x00, SDL_ALPHA_OPAQUE);\n        for (i = 0; i < SDL_CONTROLLER_AXIS_MAX / 2; ++i) {\n            /* Draw the X/Y axis */\n            int x, y;\n            x = (((int) SDL_GameControllerGetAxis(gamecontroller, i * 2 + 0)) + 32768);\n            x *= SCREEN_WIDTH;\n            x /= 65535;\n            if (x < 0) {\n                x = 0;\n            } else if (x > (SCREEN_WIDTH - 16)) {\n                x = SCREEN_WIDTH - 16;\n            }\n            y = (((int) SDL_GameControllerGetAxis(gamecontroller, i * 2 + 1)) + 32768);\n            y *= SCREEN_HEIGHT;\n            y /= 65535;\n            if (y < 0) {\n                y = 0;\n            } else if (y > (SCREEN_HEIGHT - 16)) {\n                y = SCREEN_HEIGHT - 16;\n            }\n\n            DrawRect(screen, x, y, 16, 16);\n        }\n\n        SDL_SetRenderDrawColor(screen, 0x00, 0x00, 0xFF, SDL_ALPHA_OPAQUE);\n\n        SDL_RenderPresent(screen);\n\n        if ( !done )\n            done = SDL_GameControllerGetAttached( gamecontroller ) == 0;\n    }\n\n    SDL_DestroyRenderer(screen);\n    SDL_DestroyWindow(window);\n}\n\nint\nmain(int argc, char *argv[])\n{\n    int i;\n    int nController = 0;\n    int retcode = 0;\n    char guid[64];\n    SDL_GameController *gamecontroller;\n\n    /* Initialize SDL (Note: video is required to start event loop) */\n    if (SDL_Init(SDL_INIT_VIDEO | SDL_INIT_JOYSTICK | SDL_INIT_GAMECONTROLLER ) < 0) {\n        fprintf(stderr, \"Couldn't initialize SDL: %s\\n\", SDL_GetError());\n        return 1;\n    }\n\n    /* Print information about the controller */\n    for (i = 0; i < SDL_NumJoysticks(); ++i) {\n        const char *name;\n        const char *description = \"Joystick (not recognized as game controller)\";\n\n        SDL_JoystickGetGUIDString(SDL_JoystickGetDeviceGUID(i),\n                                  guid, sizeof (guid));\n\n        if ( SDL_IsGameController(i) )\n        {\n            nController++;\n            name = SDL_GameControllerNameForIndex(i);\n        } else {\n            name = SDL_JoystickNameForIndex(i);\n        }\n        printf(\"%s %d: %s (guid %s)\\n\", description, i, name ? name : \"Unknown\", guid);\n    }\n    printf(\"There are %d game controller(s) attached (%d joystick(s))\\n\", nController, SDL_NumJoysticks());\n\n    if (argv[1]) {\n        int device = atoi(argv[1]);\n        if (device >= SDL_NumJoysticks()) {\n            printf(\"%i is an invalid joystick index.\\n\", device);\n            retcode = 1;\n        } else {\n            SDL_JoystickGetGUIDString(SDL_JoystickGetDeviceGUID(device),\n                                      guid, sizeof (guid));\n            printf(\"Attempting to open device %i, guid %s\\n\", device, guid);\n            gamecontroller = SDL_GameControllerOpen(device);\n            if (gamecontroller == NULL) {\n                printf(\"Couldn't open joystick %d: %s\\n\", device, SDL_GetError());\n                retcode = 1;\n            } else {\n                WatchGameController(gamecontroller);\n                SDL_GameControllerClose(gamecontroller);\n            }\n        }\n    }\n\n    SDL_QuitSubSystem(SDL_INIT_VIDEO | SDL_INIT_JOYSTICK | SDL_INIT_GAMECONTROLLER);\n\n    return retcode;\n}\n\n#else\n\nint\nmain(int argc, char *argv[])\n{\n    fprintf(stderr, \"SDL compiled without Joystick support.\\n\");\n    exit(1);\n}\n\n#endif\n"]}