{"version":3,"file":"testplatform.c.js","sources":["../SDL-2.0.0/testplatform.c"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkMA;;;;;AAAA;;;;;;;;;AAIA;AAAA;AAAA;AA1IA;AAyBA;AAAA;AAiBA;AAAA;AAUA;AAAA;;;;;;;;;;AA2FA;AA3BA;;;AA8BA;;;;;AA5BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;AAwBA;;;;;;;;AAlDA;;AAZA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;;AAEA","sourcesContent":["/*\n  Copyright (C) 1997-2013 Sam Lantinga <slouken@libsdl.org>\n\n  This software is provided 'as-is', without any express or implied\n  warranty.  In no event will the authors be held liable for any damages\n  arising from the use of this software.\n\n  Permission is granted to anyone to use this software for any purpose,\n  including commercial applications, and to alter it and redistribute it\n  freely.\n*/\n\n#include <stdio.h>\n\n#include \"SDL.h\"\n#include \"SDL_endian.h\"\n#include \"SDL_cpuinfo.h\"\n#include \"SDL_assert.h\"\n\n/*\n * Watcom C flags these as Warning 201: \"Unreachable code\" if you just\n *  compare them directly, so we push it through a function to keep the\n *  compiler quiet.  --ryan.\n */\nstatic int\nbadsize(size_t sizeoftype, size_t hardcodetype)\n{\n    return sizeoftype != hardcodetype;\n}\n\nint\nTestTypes(SDL_bool verbose)\n{\n    int error = 0;\n\n    if (badsize(sizeof(Uint8), 1)) {\n        if (verbose)\n            printf(\"sizeof(Uint8) != 1, instead = %u\\n\",\n                   (unsigned int)sizeof(Uint8));\n        ++error;\n    }\n    if (badsize(sizeof(Uint16), 2)) {\n        if (verbose)\n            printf(\"sizeof(Uint16) != 2, instead = %u\\n\",\n                   (unsigned int)sizeof(Uint16));\n        ++error;\n    }\n    if (badsize(sizeof(Uint32), 4)) {\n        if (verbose)\n            printf(\"sizeof(Uint32) != 4, instead = %u\\n\",\n                   (unsigned int)sizeof(Uint32));\n        ++error;\n    }\n    if (badsize(sizeof(Uint64), 8)) {\n        if (verbose)\n            printf(\"sizeof(Uint64) != 8, instead = %u\\n\",\n                   (unsigned int)sizeof(Uint64));\n        ++error;\n    }\n    if (verbose && !error)\n        printf(\"All data types are the expected size.\\n\");\n\n    return (error ? 1 : 0);\n}\n\nint\nTestEndian(SDL_bool verbose)\n{\n    int error = 0;\n    Uint16 value = 0x1234;\n    int real_byteorder;\n    Uint16 value16 = 0xCDAB;\n    Uint16 swapped16 = 0xABCD;\n    Uint32 value32 = 0xEFBEADDE;\n    Uint32 swapped32 = 0xDEADBEEF;\n    Uint64 value64, swapped64;\n\n    value64 = 0xEFBEADDE;\n    value64 <<= 32;\n    value64 |= 0xCDAB3412;\n    swapped64 = 0x1234ABCD;\n    swapped64 <<= 32;\n    swapped64 |= 0xDEADBEEF;\n\n    if (verbose) {\n        printf(\"Detected a %s endian machine.\\n\",\n               (SDL_BYTEORDER == SDL_LIL_ENDIAN) ? \"little\" : \"big\");\n    }\n    if ((*((char *) &value) >> 4) == 0x1) {\n        real_byteorder = SDL_BIG_ENDIAN;\n    } else {\n        real_byteorder = SDL_LIL_ENDIAN;\n    }\n    if (real_byteorder != SDL_BYTEORDER) {\n        if (verbose) {\n            printf(\"Actually a %s endian machine!\\n\",\n                   (real_byteorder == SDL_LIL_ENDIAN) ? \"little\" : \"big\");\n        }\n        ++error;\n    }\n    if (verbose) {\n        printf(\"Value 16 = 0x%X, swapped = 0x%X\\n\", value16,\n               SDL_Swap16(value16));\n    }\n    if (SDL_Swap16(value16) != swapped16) {\n        if (verbose) {\n            printf(\"16 bit value swapped incorrectly!\\n\");\n        }\n        ++error;\n    }\n    if (verbose) {\n        printf(\"Value 32 = 0x%X, swapped = 0x%X\\n\", value32,\n               SDL_Swap32(value32));\n    }\n    if (SDL_Swap32(value32) != swapped32) {\n        if (verbose) {\n            printf(\"32 bit value swapped incorrectly!\\n\");\n        }\n        ++error;\n    }\n    if (verbose) {\n#ifdef _MSC_VER\n        printf(\"Value 64 = 0x%I64X, swapped = 0x%I64X\\n\", value64,\n               SDL_Swap64(value64));\n#else\n        printf(\"Value 64 = 0x%llX, swapped = 0x%llX\\n\",\n               (unsigned long long) value64,\n               (unsigned long long) SDL_Swap64(value64));\n#endif\n    }\n    if (SDL_Swap64(value64) != swapped64) {\n        if (verbose) {\n            printf(\"64 bit value swapped incorrectly!\\n\");\n        }\n        ++error;\n    }\n    return (error ? 1 : 0);\n}\n\n\nint\nTestCPUInfo(SDL_bool verbose)\n{\n    if (verbose) {\n        printf(\"CPU count: %d\\n\", SDL_GetCPUCount());\n        printf(\"CPU cache line size: %d\\n\", SDL_GetCPUCacheLineSize());\n        printf(\"RDTSC %s\\n\", SDL_HasRDTSC()? \"detected\" : \"not detected\");\n        printf(\"AltiVec %s\\n\", SDL_HasAltiVec()? \"detected\" : \"not detected\");\n        printf(\"MMX %s\\n\", SDL_HasMMX()? \"detected\" : \"not detected\");\n        printf(\"3DNow! %s\\n\", SDL_Has3DNow()? \"detected\" : \"not detected\");\n        printf(\"SSE %s\\n\", SDL_HasSSE()? \"detected\" : \"not detected\");\n        printf(\"SSE2 %s\\n\", SDL_HasSSE2()? \"detected\" : \"not detected\");\n        printf(\"SSE3 %s\\n\", SDL_HasSSE3()? \"detected\" : \"not detected\");\n        printf(\"SSE4.1 %s\\n\", SDL_HasSSE41()? \"detected\" : \"not detected\");\n        printf(\"SSE4.2 %s\\n\", SDL_HasSSE42()? \"detected\" : \"not detected\");\n    }\n    return (0);\n}\n\nint\nTestAssertions(SDL_bool verbose)\n{\n    SDL_assert(1);\n    SDL_assert_release(1);\n    SDL_assert_paranoid(1);\n    SDL_assert(0 || 1);\n    SDL_assert_release(0 || 1);\n    SDL_assert_paranoid(0 || 1);\n\n#if 0   /* enable this to test assertion failures. */\n    SDL_assert_release(1 == 2);\n    SDL_assert_release(5 < 4);\n    SDL_assert_release(0 && \"This is a test\");\n#endif\n\n    {\n        const SDL_assert_data *item = SDL_GetAssertionReport();\n        while (item) {\n            printf(\"'%s', %s (%s:%d), triggered %u times, always ignore: %s.\\n\",\n                item->condition, item->function, item->filename,\n                item->linenum, item->trigger_count,\n                item->always_ignore ? \"yes\" : \"no\");\n            item = item->next;\n        }\n    }\n    return (0);\n}\n\nint\nmain(int argc, char *argv[])\n{\n    SDL_bool verbose = SDL_TRUE;\n    int status = 0;\n\n    if (argv[1] && (SDL_strcmp(argv[1], \"-q\") == 0)) {\n        verbose = SDL_FALSE;\n    }\n    if (verbose) {\n        printf(\"This system is running %s\\n\", SDL_GetPlatform());\n    }\n\n    status += TestTypes(verbose);\n    status += TestEndian(verbose);\n    status += TestCPUInfo(verbose);\n    status += TestAssertions(verbose);\n\n    return status;\n}\n"]}